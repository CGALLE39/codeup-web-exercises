<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form>
    <label for="title">Title</label>
    <input type="text" id="title" name="title">
    <label for="artist">Artist: </label>
    <input type="text" id="artist" name="artist">
    <label for="artist">Artist: </label>
    <button id="addSong">Add Song</button>

</form>
<div id="Library"></div>

<script>
    "use strict"

    const URL = "some API";
    const getAllSongs = () => {
        fetch(URL).then(res => res.json()).then(res => console.log(res));
    }

    ////add song to cardHTML
    const renderSongHTML = () => {
        console.log("Rendering song HTML")
    getAllSongs().then((data) => {
        let songCards = data.map(song => {
            return
            '<div>
                <h3> Title: ${song.title}</h3>
                <p> Artist: ${song.artist}</p>
                <button data-id="${data.id}">Edit</button>
                <button data-id="${data.id}"></button>
            </div>
            '
        })
        console.log(songCards);
        document.getElementById("Library").innerHTML = songCards.join("");
    })
    }


    const getSongByID = (id) => {
        ///gets indiviual id that matches the object///
        const URL = "some API"${id};
        return fetch(URL).then(res => res.json()).then(res => console.log(res));
    }

    getSongByID(3);


    ////////////// EDIT (PUT vs PATCH)

    // PUT method - requires you to resubmit the entire entity.
    // PATCH method - only edits properties that currently exist in the entity.

    //PUT METHOD//
    const editSong = (song) => {
        const URL = "some API";
        let options = {
            method: "PUT",
            headers: {
                //content tyoe tells the server what type of data we are sending with our req.
                'Content-Type': 'application/json'  //format in whcih we send the data
            },
            body: JSON.stringify(song) // convert the JS obj into a JSON str before sending to server
        }

        return fetch('${URL}/${song.id}', options).then(resp => resp.json())
    }



    /////CHANGE AN OBJ uwu

    let editedSong = {
        id: 1,
        title: "Hells Bells",
        artist: "ACDC"
    }

    editSong(editedSong);


    //PATCH METHOD //
    const editSong = (song) => {
        const URL = "some API";
        let options = {
            method: "PUT",
            headers: {
                //content tyoe tells the server what type of data we are sending with our req.
                'Content-Type': 'application/json'  //format in whcih we send the data
            },
            body: JSON.stringify(song) // convert the JS obj into a JSON str before sending to server
        }

        return fetch('${URL}/${song.id}', options).then(resp => resp.json())
    }



    /////CHANGE AN OBJ uwu

    let editedSong = {
        id: 1,
        title: "Hells Bells",
    }

    editSong(editedSong);

    //////////////////////////////POST REQUEST /////////////////

    const addSong = (songObj) => {
        const URL = "some api url";
        let options = {
            method: "POST",
            headers: {
                'Content-Type': 'applications/json'
            },
            body: JSON.stringify(songObj)
        }
        return fetch(URL, options).then(res => res.json()).then(result => console.log("yay new song", result))
    }

    document.getElementById("addSong").addEventListener("click", function(e) {
        e.preventDefault();
        let newSong = {
            title: document.getElementById("title").value,
            artist: document.getElementById("artist").value
        }
        addSong(newSong).then((res) => {
            console.log(res)
            renderSongHTML()
        })
    })

    // DELETE METHOD

    const deleteSong = (id) => {
        const URL = "some api url";
        let options = {
            method: "DELETE",
            headers: {
                'Content-Type': 'application/json'
            }

        }
        return fetch('${URL}/${id}', options).then(() => console.log("the song was deleted")).then(renderSongHTML)
    }

    deleteSong(12);
</script>
</body>
</html>